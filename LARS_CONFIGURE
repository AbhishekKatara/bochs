
# strip off the debug info from the .bc file
# because a bug in llvm makes the jit:ing fail (it can't find some symbols)

# how a working bochs was built
export PATH=$HOME/sw/llvm31:$PATH
mkdir builddir; cd builddir
../configure CXX=clang++ CXXFLAGS="-g $(llvm-config --cxxflags)" LDFLAGS="$(llvm-config --ldflags) $(llvm-config --libs all)" --prefix=/home/larsr/sw/bochs --without-x11 --with-term --enable-pci --enable-acpi --with-rfb --enable-all-optimizations --enable-pnic --enable-gdb-stub --enable-ne2000
make -j8
